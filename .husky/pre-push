#!/bin/sh

echo "ğŸ—ï¸ Running pre-push validations..."

# Detect package manager
if command -v pnpm >/dev/null 2>&1; then
    PKG_MANAGER="pnpm"
    PKG_EXEC="pnpm exec"
    echo "ğŸ“¦ Using pnpm"
elif command -v npm >/dev/null 2>&1; then
    PKG_MANAGER="npm"
    PKG_EXEC="npx"
    echo "ğŸ“¦ Using npm"
else
    echo "âŒ No package manager found (pnpm or npm required)"
    exit 1
fi

# Run type checking and linting (faster than full build)
echo "ğŸ“ Type checking..."
$PKG_EXEC tsc --noEmit

echo "ğŸ” Linting..."
$PKG_MANAGER run lint

echo "âœ… Pre-push validations passed!"